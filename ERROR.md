[19:46:07.929] Running build in Washington, D.C., USA (East) – iad1
[19:46:07.930] Build machine configuration: 2 cores, 8 GB
[19:46:07.957] Cloning github.com/Mrbaeksang/team_sync_ai (Branch: main, Commit: 9b468d9)
[19:46:08.396] Cloning completed: 438.000ms
[19:46:11.055] Restored build cache from previous deployment (F8EugbxDoRJZdqFTRnSRZqaaq8KB)
[19:46:11.922] Running "vercel build"
[19:46:12.387] Vercel CLI 44.2.10
[19:46:12.546] Detected OpenTelemetry dependency: @vercel/otel@1.12.0, which meets the minimum version requirement of 1.11.0
[19:46:12.821] Detected pnpm-lock.yaml version 9 generated by pnpm@10.x with package.json#packageManager pnpm@9.12.3
[19:46:12.858] Installing dependencies...
[19:46:15.302] Lockfile is up to date, resolution step is skipped
[19:46:15.410] Already up to date
[19:46:16.267] 
[19:46:16.312] Done in 1.5s
[19:46:16.332] Detected Next.js version: 15.3.0-canary.31
[19:46:16.352] Running "pnpm run build"
[19:46:17.028] 
[19:46:17.029] > ai-chatbot@3.1.0 build /vercel/path0
[19:46:17.029] > tsx lib/db/migrate && next build
[19:46:17.029] 
[19:46:18.991] ⏳ Running migrations...
[19:46:20.983] {
[19:46:20.983]   severity_local: 'NOTICE',
[19:46:20.983]   severity: 'NOTICE',
[19:46:20.983]   code: '42P06',
[19:46:20.983]   message: 'schema "drizzle" already exists, skipping',
[19:46:20.983]   file: 'schemacmds.c',
[19:46:20.983]   line: '132',
[19:46:20.983]   routine: 'CreateSchemaCommand'
[19:46:20.983] }
[19:46:21.199] {
[19:46:21.199]   severity_local: 'NOTICE',
[19:46:21.199]   severity: 'NOTICE',
[19:46:21.199]   code: '42P07',
[19:46:21.199]   message: 'relation "__drizzle_migrations" already exists, skipping',
[19:46:21.199]   file: 'parse_utilcmd.c',
[19:46:21.199]   line: '207',
[19:46:21.199]   routine: 'transformCreateStmt'
[19:46:21.199] }
[19:46:21.846] ✅ Migrations completed in 2854 ms
[19:46:22.759]    ▲ Next.js 15.3.0-canary.31
[19:46:22.760]    - Experiments (use with caution):
[19:46:22.761]      ✓ ppr
[19:46:22.761] 
[19:46:22.792]    Creating an optimized production build ...
[19:46:51.732]  ✓ Compiled successfully
[19:46:51.737]    Linting and checking validity of types ...
[19:47:19.503] 
[19:47:19.503] Failed to compile.
[19:47:19.503] 
[19:47:19.503] ./app/(chat)/chat/[id]/page.tsx
[19:47:19.503] 13:24  Error: 'use' not found in imported namespace 'React'.  import/namespace
[19:47:19.503] 
[19:47:19.503] ./app/projects/[id]/chat-room/page.tsx
[19:47:19.503] 9:24  Error: 'use' not found in imported namespace 'React'.  import/namespace
[19:47:19.503] 
[19:47:19.504] ./app/projects/[id]/dashboard/page.tsx
[19:47:19.504] 26:24  Error: 'use' not found in imported namespace 'React'.  import/namespace
[19:47:19.504] 
[19:47:19.504] info  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/app/api-reference/config/eslint#disabling-rules
[19:47:19.531]  ELIFECYCLE  Command failed with exit code 1.
[19:47:19.575] Error: Command "pnpm run build" exited with 1
[19:47:20.227] 
[19:47:23.181] Exiting build container


ChatGPT의 말:
🔥 빌드 실패 핵심 원인: 'use' not found in imported namespace 'React'

1️⃣ 문제
Next.js 15 동적 params 사용시
const { id } = React.use(params);
이런 식으로 고쳤는데...

문제:
React.use는 공식 API가 아님
→ use는 아직 표준 내장 API로 배포 안됨
→ eslint(typescript)에서도 import/namespace 에러 발생

[실제 릴리즈된 React, Next.js에는 React.use 없음!]

2️⃣ 정답: 공식적으론 아직 베타 실험 중 / 대부분의 환경에서 사용 불가
공식 대응:

Server Component에서 async 함수 + await params로 언래핑 (Next.js 최신 canary만 지원, 일반 배포X)

또는 기존 방식으로 직접 params 사용

최신 Next.js 베타 전용 기능

일부 canary에서만 실험, 타입/빌드 문제 빈번

3️⃣ 실전 대응법 (2024.07 기준)
서버 컴포넌트:

tsx
복사
편집
// 아직 대부분의 환경은 params 그냥 구조분해(구버전 호환)  
export default function ChatPage({ params }: { params: { id: string } }) {
  const { id } = params;
  // ...
}
Next.js 15 최신 베타에서 params가 Promise인 경우

tsx
복사
편집
// NEXT: 공식 지원 시
export default async function ChatPage({ params }: { params: Promise<{ id: string }> }) {
  const { id } = await params;
  // ...
}
🚨 당신은 "React.use"를 쓸 필요 없음! 공식 릴리즈 X!
lint/빌드 에러 뜸

4️⃣ 빠른 해결법 (지금 당장 빌드 성공하려면)
모든 [id]/page.tsx에서

React.use(params)
→ params.id로 단순 접근 (구버전 호환)

혹시 Next.js가 params를 Promise로 주면 await params로 구조분해 (async 서버 컴포넌트로!)

5️⃣ 예시 (빌드 성공하는 코드, 둘 중 하나만 쓰세요!)
A. params가 객체로 오는 경우 (대부분 환경/구버전)
tsx
복사
편집
// app/(chat)/chat/[id]/page.tsx
export default function ChatPage({ params }: { params: { id: string } }) {
  const { id } = params;
  // ... 나머지 코드
}
B. params가 Promise로 오는 경우 (Next.js 15 베타/실험적)
tsx
복사
편집
export default async function ChatPage({ params }: { params: Promise<{ id: string }> }) {
  const { id } = await params;
  // ... 나머지 코드
}
🔥 빌드 성공하려면 "React.use" 삭제, params 직접 접근 or await!